标定板表面加工出相机标定实验的棋盘格,能够较为精确地产生视觉系统测量的特征点,即棋盘格的角点;在标定板的黑色区域镂空圆孔,圆孔与黑色正方形同中心, 3D激光雷达通过扫描镂空区域特征,计算圆孔中心点三维坐标作为激光测量系统的特征点。此方法能够便捷和准确地实现两种传感器在一次标定实验中同时完成数据采集。将3D激光雷达获取的圆孔中心点三维坐标利用式(4)转化为相机坐标系下的三维坐标,即可确定联合测量系统下角点和中心点的测量距离;与其在标定板上的理论距离进行比较可求得联合测量误差,通过非线性优化联合测量误差解得两种传感器之间的旋转矩阵R和平移向量T,实现对视觉系统和激光系统的联合标定。

2. 2  联合标定流程

本文的联合标定算法具体步骤如下:
1) 采用张氏标定 [16 ] 获得立体相机的内外参数,通过采集棋盘格标定板图像,将棋盘格角点作为视觉系统的特征点,提取角点的二维像素坐标,按照双目视觉算法还原角点在相机坐标系下的三维坐标。
2)3D 激光传感器系统经过自标定获得自身内外参数,通过扫描标定板镂空圆孔区域,获取圆孔中心点在3D激光测量系统坐标系下的三维坐标。将中心点作为3D激光系统的特征点,为了建立两种传感器坐标系之间的联系,需要将3D激光坐标系下中心点的三维坐标按照一定的关系转换到相机坐标系下的三维坐标。
3) 按照上述步骤,计算相机坐标系下角点和相对应中心点的实际测量距离,最终通过最小化特两组征点之间的理论与实际测量距离的平方差,从而获取两传感器坐标系之间的旋转矩阵和平移向量.
由联合标定基本式(4) 可知,联合标定所求旋转矩阵R中未知量为关于旋转角 φ、 θ、ψ 的变量,因此,R有3个未知参数,平移向量T有3个未知参数,因此联合标定参数有6个未知量。具体优化求解过程如下:
1) 由式(4) 将激光坐标系下中心点坐标转化为相机坐标系下坐标 (Equation 7)式中:( X lci ,Y lci ,Z lci ) 为圆孔中心点转化在相机坐标系下的三维坐标,其中含有定义 R 和 T 的 6 个未知量 φ、 θ、 ψ、t x 、 t y 、 t z 。
2) 建立角点和中心点测量距离与理论距离误差关系
如图 6 所示,根据角点和中心点的分布,确定每个角点与相邻的 3 个中心点的实际测量距离与理论距离之间的误差关系,建立对应的误差方程(8) 。(Equation 8)式中:e 为距离误差, d 测 为实际测量距离,d 理 为理论距离。
(Figure 6)
角点 1,2对应中心点 a、 b、 d;角点 3、 4 对应中心点b、 c、 e;角点 5、
6 对应中心点 d、 f、 g;角点 7、8 对应中心点e、 g、 h。根据标定板实际加工尺寸关系,存在两种理论距离值,设定较短距离为 M,较长距离为 N。角点与 3 个中心点的误差方程如下,以角点 1 为例。
(Equation 9)
3) 优化所有角点误差方程之和为最小
比如选取标定板 8 个角点和 8 个中心点,按照上述确定距离关系后共有 24 个误差方程,其中都含有未知量φ、 θ、 ψ、 t x 、 t y 、 t z 。为了求出最优的联合标定参数旋转矩阵R 和平移向量 T,需要使所有误差平方和最小,即式(10)所示非线性优化求解问题。本文采用基于文献[ 17]的Direct 全局优化算法,设定优化量的上下界值,迭代求得参数的全局最优解。(Equation 10)





